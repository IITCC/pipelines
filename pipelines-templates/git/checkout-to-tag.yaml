
parameters:
  - name: 'REPO_PATH'
    type: string
  - name: 'TAG_TO_CHECKOUT'
    type: string

steps:
  - script: |

      git -C ${{ parameters.REPO_PATH }} checkout ${{ parameters.TAG_TO_CHECKOUT }}
      checkedout_tag=$(git -C ${{ parameters.REPO_PATH }} describe --tags)
      echo "Checkedout tag: " $checkedout_tag
      echo "Required tag to checkout: " ${{ parameters.TAG_TO_CHECKOUT }}

      if [ $checkedout_tag != ${{ parameters.TAG_TO_CHECKOUT }} ]
      then
        echo "Tags do not match each other!"
        exit 1
      fi
    displayName: Checkout to tag
    name: checkout_to_tag
